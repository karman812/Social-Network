{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Karim\\\\Desktop\\\\\\u043F\\u0440\\u043E\\u0433\\u0430\\\\react\\\\1project\\\\my-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Karim\\\\Desktop\\\\\\u043F\\u0440\\u043E\\u0433\\u0430\\\\react\\\\1project\\\\my-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"C:\\\\Users\\\\Karim\\\\Desktop\\\\\\u043F\\u0440\\u043E\\u0433\\u0430\\\\react\\\\1project\\\\my-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import{getUsers}from\"../api/api\";import{updateObjextsInArray}from\"../utils/object-helpers\";var FOLLOW='FOLLOW';var UNFOLLOW='UNFOLLOW';var SET_USERS='SET-USERS';var CURRENT_PAGE='CURRENT-PAGE';var TOTAL_USERS_COUNT='TOTAL-USERS-COUNT';var TOGGLE_IS_FETCHING='TOGGLE-IS-FETCHING';var initialState={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:true};var userReducer=function userReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case FOLLOW:return _objectSpread(_objectSpread({},state),{},{users:updateObjextsInArray(state.users,action.userId,\"id\",{followed:true})});case UNFOLLOW:return _objectSpread(_objectSpread({},state),{},{users:updateObjextsInArray(state.users,action.userId,\"id\",{followed:false})});case SET_USERS:return _objectSpread(_objectSpread({},state),{},{users:action.users});case CURRENT_PAGE:return _objectSpread(_objectSpread({},state),{},{currentPage:action.currentPage});case TOTAL_USERS_COUNT:return _objectSpread(_objectSpread({},state),{},{totalUsersCount:action.count});case TOGGLE_IS_FETCHING:return _objectSpread(_objectSpread({},state),{},{isFetching:action.isFetching});default:return state;}};export var follow=function follow(userId){return{type:FOLLOW,userId:userId};};export var unfollow=function unfollow(userId){return{type:UNFOLLOW,userId:userId};};export var setUsers=function setUsers(users){return{type:SET_USERS,users:users};};export var setCurrentPage=function setCurrentPage(currentPage){return{type:CURRENT_PAGE,currentPage:currentPage};};export var setTotalUsersCount=function setTotalUsersCount(totalUsersCount){return{type:TOTAL_USERS_COUNT,count:totalUsersCount};};export var toggleIsFetching=function toggleIsFetching(isFetching){return{type:TOGGLE_IS_FETCHING,isFetching:isFetching};};export var getUsersThunkCreator=function getUsersThunkCreator(currentPage,pageSize){console.log(currentPage);return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(toggleIsFetching(true));_context.next=3;return getUsers(currentPage,pageSize);case 3:response=_context.sent;dispatch(toggleIsFetching(false));dispatch(setUsers(response.items));dispatch(setTotalUsersCount(response.totalCount));dispatch(setCurrentPage(currentPage));case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export default userReducer;","map":{"version":3,"sources":["C:/Users/Karim/Desktop/прога/react/1project/my-app/src/redux/users-reducer.js"],"names":["getUsers","updateObjextsInArray","FOLLOW","UNFOLLOW","SET_USERS","CURRENT_PAGE","TOTAL_USERS_COUNT","TOGGLE_IS_FETCHING","initialState","users","pageSize","totalUsersCount","currentPage","isFetching","userReducer","state","action","type","userId","followed","count","follow","unfollow","setUsers","setCurrentPage","setTotalUsersCount","toggleIsFetching","getUsersThunkCreator","console","log","dispatch","response","items","totalCount"],"mappings":"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","sourcesContent":["import {getUsers} from \"../api/api\";\r\nimport {updateObjextsInArray} from \"../utils/object-helpers\";\r\n\r\nconst FOLLOW = 'FOLLOW';\r\nconst UNFOLLOW = 'UNFOLLOW';\r\nconst SET_USERS = 'SET-USERS';\r\nconst CURRENT_PAGE = 'CURRENT-PAGE';\r\nconst TOTAL_USERS_COUNT = 'TOTAL-USERS-COUNT';\r\nconst TOGGLE_IS_FETCHING = 'TOGGLE-IS-FETCHING'\r\n\r\nconst initialState = {\r\n    users: [],\r\n    pageSize: 5,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: true\r\n}\r\n\r\nconst userReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case FOLLOW:\r\n            return {\r\n                ...state,\r\n                users: updateObjextsInArray(state.users, action.userId, \"id\", {followed: true} )\r\n            }\r\n        case UNFOLLOW:\r\n            return {\r\n                ...state,\r\n                users: updateObjextsInArray(state.users, action.userId, \"id\", {followed: false} )\r\n            }\r\n        case SET_USERS:\r\n            return {\r\n                ...state,\r\n                users: action.users\r\n            }\r\n        case CURRENT_PAGE:\r\n            return {\r\n                ...state,\r\n                currentPage: action.currentPage\r\n            }\r\n        case TOTAL_USERS_COUNT:\r\n            return {\r\n                ...state,\r\n                totalUsersCount: action.count\r\n            }\r\n        case TOGGLE_IS_FETCHING:\r\n            return {\r\n                ...state,\r\n                isFetching: action.isFetching\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const follow = (userId) => {\r\n    return {\r\n        type: FOLLOW,\r\n        userId: userId\r\n    }\r\n}\r\nexport const unfollow = (userId) => {\r\n    return {\r\n        type: UNFOLLOW,\r\n        userId: userId\r\n    }\r\n}\r\nexport const setUsers = (users) => {\r\n    return {\r\n        type: SET_USERS,\r\n        users: users\r\n    }\r\n}\r\nexport const setCurrentPage = (currentPage) => {\r\n    return {\r\n        type: CURRENT_PAGE,\r\n        currentPage: currentPage\r\n    }\r\n}\r\nexport const setTotalUsersCount = (totalUsersCount) => {\r\n    return {\r\n        type: TOTAL_USERS_COUNT,\r\n        count: totalUsersCount\r\n    }\r\n}\r\nexport const toggleIsFetching = (isFetching) => {\r\n    return {\r\n        type: TOGGLE_IS_FETCHING,\r\n        isFetching: isFetching\r\n    }\r\n}\r\nexport const getUsersThunkCreator = (currentPage, pageSize) => {\r\n    console.log(currentPage)\r\n    return async (dispatch) => {\r\n        dispatch(toggleIsFetching(true))\r\n        let response = await getUsers(currentPage, pageSize)\r\n            dispatch(toggleIsFetching(false))\r\n            dispatch(setUsers(response.items))\r\n            dispatch(setTotalUsersCount(response.totalCount))\r\n        dispatch(setCurrentPage(currentPage))\r\n\r\n    }\r\n}\r\n\r\nexport default userReducer"]},"metadata":{},"sourceType":"module"}