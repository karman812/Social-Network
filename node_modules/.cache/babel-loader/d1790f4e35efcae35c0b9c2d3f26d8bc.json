{"ast":null,"code":"const FOLLOW = 'FOLLOW';\nconst UNFOLLOW = 'UNFOLLOW';\nconst SET_USERS = 'SET-USERS';\nconst CURRENT_PAGE = 'CURRENT-PAGE';\nconst TOTAL_USERS_COUNT = 'TOTAL-USERS-COUNT';\nconst TOGGLE_IS_FETCHING = 'TOGGLE-IS-FETCHING';\nconst initialState = {\n  users: [],\n  pageSize: 5,\n  totalUsersCount: 0,\n  currentPage: 1,\n  isFetching: true\n};\n\nconst userReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case FOLLOW:\n      return { ...state,\n        users: state.users.map(u => {\n          if (u.id == action.userId) {\n            return { ...u,\n              followed: true\n            };\n          }\n\n          return u;\n        })\n      };\n\n    case UNFOLLOW:\n      return { ...state,\n        users: state.users.map(u => {\n          if (u.id == action.userId) {\n            return { ...u,\n              followed: false\n            };\n          }\n\n          return u;\n        })\n      };\n\n    case SET_USERS:\n      return { ...state,\n        users: action.users\n      };\n\n    case CURRENT_PAGE:\n      return { ...state,\n        currentPage: action.currentPage\n      };\n\n    case TOTAL_USERS_COUNT:\n      return { ...state,\n        totalUsersCount: action.count\n      };\n\n    case TOGGLE_IS_FETCHING:\n      return { ...state,\n        isFetching: action.isFetching\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const follow = userId => {\n  return {\n    type: FOLLOW,\n    userId: userId\n  };\n};\nexport const unfollow = userId => {\n  return {\n    type: UNFOLLOW,\n    userId: userId\n  };\n};\nexport const setUsers = users => {\n  return {\n    type: SET_USERS,\n    users: users\n  };\n};\nexport const setCurrentPage = currentPage => {\n  return {\n    type: CURRENT_PAGE,\n    currentPage: currentPage\n  };\n};\nexport const setTotalUsersCount = totalUsersCount => {\n  return {\n    type: TOTAL_USERS_COUNT,\n    count: totalUsersCount\n  };\n};\nexport const toggleIsFetching = isFetching => {\n  return {\n    type: TOGGLE_IS_FETCHING,\n    isFetching: isFetching\n  };\n};\nexport const getUsersThunk = dispatch => {\n  toggleIsFetching(true);\n  getUsers(this.props.currentPage, this.props.pageSize).then(data => {\n    this.props.toggleIsFetching(false);\n    this.props.setUsers(data.items);\n    this.props.setTotalUsersCount(data.totalCount);\n  });\n};\nexport default userReducer;","map":{"version":3,"sources":["C:/Users/Karim/Desktop/прога/react/1project/my-app/src/redux/users-reducer.js"],"names":["FOLLOW","UNFOLLOW","SET_USERS","CURRENT_PAGE","TOTAL_USERS_COUNT","TOGGLE_IS_FETCHING","initialState","users","pageSize","totalUsersCount","currentPage","isFetching","userReducer","state","action","type","map","u","id","userId","followed","count","follow","unfollow","setUsers","setCurrentPage","setTotalUsersCount","toggleIsFetching","getUsersThunk","dispatch","getUsers","props","then","data","items","totalCount"],"mappings":"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","sourcesContent":["const FOLLOW = 'FOLLOW';\r\nconst UNFOLLOW = 'UNFOLLOW';\r\nconst SET_USERS = 'SET-USERS';\r\nconst CURRENT_PAGE = 'CURRENT-PAGE';\r\nconst TOTAL_USERS_COUNT = 'TOTAL-USERS-COUNT';\r\nconst TOGGLE_IS_FETCHING = 'TOGGLE-IS-FETCHING'\r\n\r\nconst initialState = {\r\n    users: [],\r\n    pageSize: 5,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: true\r\n}\r\n\r\nconst userReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case FOLLOW:\r\n            return {\r\n                ...state,\r\n                users: state.users.map(u => {\r\n                    if (u.id == action.userId) {\r\n                        return {...u, followed: true}\r\n                    }\r\n                    return u\r\n                })\r\n            }\r\n        case UNFOLLOW:\r\n            return {\r\n                ...state,\r\n                users: state.users.map(u => {\r\n                    if (u.id == action.userId) {\r\n                        return {...u, followed: false}\r\n                    }\r\n                    return u\r\n                })\r\n            }\r\n        case SET_USERS:\r\n            return {\r\n                ...state,\r\n                users: action.users\r\n            }\r\n        case CURRENT_PAGE:\r\n            return {\r\n                ...state,\r\n                currentPage: action.currentPage\r\n            }\r\n        case TOTAL_USERS_COUNT:\r\n            return {\r\n                ...state,\r\n                totalUsersCount: action.count\r\n            }\r\n        case TOGGLE_IS_FETCHING:\r\n            return {\r\n                ...state,\r\n                isFetching: action.isFetching\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const follow = (userId) => {\r\n    return {\r\n        type: FOLLOW,\r\n        userId: userId\r\n    }\r\n}\r\nexport const unfollow = (userId) => {\r\n    return {\r\n        type: UNFOLLOW,\r\n        userId: userId\r\n    }\r\n}\r\nexport const setUsers = (users) => {\r\n    return {\r\n        type: SET_USERS,\r\n        users: users\r\n    }\r\n}\r\nexport const setCurrentPage = (currentPage) => {\r\n    return {\r\n        type: CURRENT_PAGE,\r\n        currentPage: currentPage\r\n    }\r\n}\r\nexport const setTotalUsersCount = (totalUsersCount) => {\r\n    return {\r\n        type: TOTAL_USERS_COUNT,\r\n        count: totalUsersCount\r\n    }\r\n}\r\nexport const toggleIsFetching = (isFetching) => {\r\n    return {\r\n        type: TOGGLE_IS_FETCHING,\r\n        isFetching: isFetching\r\n    }\r\n}\r\nexport const getUsersThunk = (dispatch) =>{\r\n    toggleIsFetching(true)\r\n    getUsers(this.props.currentPage, this.props.pageSize).then(data => {\r\n        this.props.toggleIsFetching(false)\r\n        this.props.setUsers(data.items)\r\n        this.props.setTotalUsersCount(data.totalCount)\r\n    })\r\n}\r\n\r\nexport default userReducer"]},"metadata":{},"sourceType":"module"}